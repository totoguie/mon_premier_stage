{% extends "admin/base_admin.html" %}
{% block title %}Admin Dashboard - Mon Premier Stage{% endblock title %}
    <!-- Contenu -->
    <main class="flex-1 p-4 sm:p-8">
      {% block content %}
      <!-- En-tête -->
      <div class="mb-6">
        <h2 class="text-2xl font-bold text-primary-blue">Tableau de bord</h2>
        <p class="text-gray-600 text-sm sm:text-base">Vue d’ensemble de la plateforme</p>
      </div>

      <!-- Statistiques -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8">
        <div class="bg-white shadow rounded-lg p-4">
          <p class="text-gray-500 text-sm">Stagiaires</p>
          <p class="text-2xl font-bold text-primary-blue">{{total_stagiaire}}</p>
        </div>
        <div class="bg-white shadow rounded-lg p-4">
          <p class="text-gray-500 text-sm">Entreprises</p>
          <p class="text-2xl font-bold text-primary-blue">{{total_entreprise}}</p>
        </div>
        <div class="bg-white shadow rounded-lg p-4">
          <p class="text-gray-500 text-sm">Offres actives</p>
          <p class="text-2xl font-bold text-primary-blue">{{total_offre}}</p>
        </div>
      </div>

      <!-- Utilisateurs récents -->
      <div class="bg-white rounded-lg shadow-md mb-6">
        <div class="px-4 py-3 border-b border-gray-200">
          <h3 class="text-lg font-semibold text-primary-blue">Utilisateurs récents</h3>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-4 py-2 text-left">Nom</th>
                <th class="px-4 py-2 text-left">Rôle</th>
                <th class="px-4 py-2 text-left">Date</th>
              </tr>
            </thead>
            <tbody>
              {% for dernier_utilisateur in dernier_utilisateur %}
              <tr class="border-t">
                <td class="px-4 py-2">{{dernier_utilisateur.username}}</td>
                <td class="px-4 py-2">{{dernier_utilisateur.role}}</td>
                <td class="px-4 py-2">Il y a 2h</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

      <!-- Offres récentes -->
      <div class="bg-white rounded-lg shadow-md">
        <div class="px-4 py-3 border-b border-gray-200">
          <h3 class="text-lg font-semibold text-primary-blue">Offres récentes</h3>
        </div>
        <div class="overflow-x-auto">
          <table class="min-w-full text-sm">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-4 py-2 text-left">Titre</th>
                <th class="px-4 py-2 text-left">Entreprise</th>
                <th class="px-4 py-2 text-left">Statut</th>
              </tr>
            </thead>
            <tbody>
              {% for offre_recente in offre_recente  %}
              <tr class="border-t">
                <td class="px-4 py-2">{{offre_recente.titre_poste}}</td>
                <td class="px-4 py-2">{{titre_poste.entreprise.nom_entreprise}}</td>
                <td class="px-4 py-2">{{offre_recente.statut_offre}}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>

       
      <div class="bg-white rounded-lg shadow-md mt-8">
        <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
          <h2 class="text-lg font-semibold text-primary-blue">Entreprises en attente de validation</h2>
          <a href="{% url "liste_entreprise" %}" class="text-sm text-primary-orange hover:underline">Voir tout</a>
        </div>
        <div class="p-6">
          <table class="min-w-full text-sm">
            <thead>
              <tr class="text-left text-xs font-medium text-gray-500 uppercase">
                <th>Nom</th>
                <th>Email</th>
                <th>Date</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              {% for entreprise_en_attente in entreprise_en_attente %}
              <tr class="border-t">
                <td class="py-2">{{entreprise_en_attente.nom_entreprise}}</td>
                <td>{{entreprise_en_attente.email_entreprise}}</td>
                <td>{{entreprise_en_attente.created_at}}</td>
                <td>
                  <a href="{% url "validerentreprise" entreprise_en_attente.id_entreprise %}" class="bg-green-500 text-white px-3 py-1 rounded text-xs">Valider</a>
                  <a href="{% url "detailentreprise" entreprise_en_attente.id_entreprise %}" class="bg-primary-blue text-white px-3 py-1 rounded text-xs">Détails</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </main>
    {% endblock content %}
  </div>
</body>
</html>
